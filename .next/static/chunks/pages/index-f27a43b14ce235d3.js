(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(2285)}])},2285:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(5893),n=s(7294);function l(){let[e,t]=(0,n.useState)([{role:"assistant",content:"\uD83D\uDC4B Hi, I’m AP-Prime, your personal Toronto real estate assistant! What type of property are you looking for?"}]),[s,l]=(0,n.useState)(""),[r,i]=(0,n.useState)(!1),o=(0,n.useRef)(null),c=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null===(e=o.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e]),(0,n.useEffect)(()=>{if(!c.current)return;let e="https://labs.heygen.com",t=()=>{let t=c.current.contentWindow;t.postMessage({type:"streaming-embed",action:"init"},e),t.postMessage({type:"streaming-embed",action:"show"},e)};return c.current.addEventListener("load",t),()=>{c.current.removeEventListener("load",t)}},[]);let d=async()=>{if(!s.trim()||r)return;let a=[...e,{role:"user",content:s.trim()}];t(a),l(""),i(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:a})}),s=await e.json(),n=(null==s?void 0:s.reply)||"Sorry, I didn't catch that.";t(e=>[...e,{role:"assistant",content:n}])}catch(e){console.error("Chat error:",e),t(e=>[...e,{role:"assistant",content:"⚠️ Oops, something went wrong. Please try again."}])}finally{i(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row min-h-screen bg-gray-100 p-6 gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col flex-[2] items-center mt-6",children:[(0,a.jsx)("h1",{className:"mb-6 text-2xl font-bold text-gray-800 text-center",children:"AP-Prime Your Personal Real Estate Assistant"}),(0,a.jsx)("div",{className:"flex justify-center mb-6 w-full max-w-lg h-48 lg:h-80",children:(0,a.jsx)("iframe",{ref:c,src:"https://labs.heygen.com/guest/streaming-embed?share=eyJxdWFsaXR5IjoiaGlnaCIsImF2YXRhck5hbWUiOiJQZWRyb19DaGFpcl9TaXR0aW5nX3B1YmxpYyIsInByZXZpZXdJbWciOiJodHRwczovL2ZpbGVzMi5oZXlnZW4uYWkvYXZhdGFyL3YzLzkyZGU3OWU1MzNhODQyMWJiODZkYTYzYTBlNWViMTJmXzU3MDEwL3ByZXZpZXdfdGFyZ2V0LndlYnAiLCJuZWVkUmVtb3ZlQmFja2dyb3VuZCI6ZmFsc2UsImtub3dsZWRnZUJhc2VJZCI6IjAzNzIwN2YyNDc2NzQ0MGY5ZmQ0YjI3MTNmZDQzMmZiIiwidXNlcm5hbWUiOiJiYTA5Yjc4ZDg0NDM0YWExYjBjOWE0ZGE0MmJlOWJlYSJ9&inIFrame=1&autoplay=1",title:"HeyGen Avatar",className:"w-full h-full rounded-lg shadow-lg",allow:"microphone; autoplay"})}),(0,a.jsxs)("div",{className:"mt-3 w-full max-w-lg bg-white rounded-2xl shadow-md flex flex-col",children:[(0,a.jsxs)("div",{className:"overflow-y-auto p-4 space-y-2",style:{height:"184px"},children:[e.map((e,t)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsx)("span",{className:"px-4 py-2 rounded-2xl max-w-xs whitespace-pre-wrap ".concat("user"===e.role?"bg-blue-600 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"),children:e.content})},t)),r&&(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:"Assistant is typing..."}),(0,a.jsx)("div",{ref:o})]}),(0,a.jsxs)("div",{className:"flex border-t",children:[(0,a.jsx)("input",{className:"flex-1 p-3 rounded-bl-2xl outline-none",value:s,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d())},placeholder:"Ask me about homes...","aria-label":"Chat input"}),(0,a.jsx)("button",{className:"bg-blue-600 text-white px-6 rounded-br-2xl disabled:opacity-60",onClick:d,disabled:r,children:"Send"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col flex-[1] mt-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"\uD83C\uDFE1 Listings"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-4",children:[(0,a.jsx)("h3",{className:"font-medium",children:"123 Main St, Toronto"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"3 Bed \xb7 2 Bath \xb7 $850,000"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-4",children:[(0,a.jsx)("h3",{className:"font-medium",children:"456 Queen St, Toronto"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"2 Bed \xb7 1 Bath \xb7 $650,000"})]})]})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);